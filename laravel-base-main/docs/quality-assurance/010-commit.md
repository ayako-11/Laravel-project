(※このファイルは雛形です。以下の内容は記載例となります。ドキュメント内容がプロジェクト内容に沿った内容であることを確認し、必要な場合には内容を更新してからコミットしてください。)

# Commit基準
当資料では、本プロジェクトにおいてソースコードをコミットする時点で満たすべき基準について記載する。

## 対象 / subject
- アプリケーション担当者 / Application Engineer
- 品質管理担当者 / Quality Assurance Engineer
- プロジェクト管理者 / Project Manager

# 定義
本プロジェクトのリポジトリに対するコミットを行う場合、以下に示す3つの基準をすべて満たしてなければならない。

## 1.静的解析が成功すること
リポジトリにコミットされるソースコードは、以下のコマンドにて実行される静的コード解析の結果が0（Success）となる状態でなければならない。

~~~ shell
vendor/bin/balocco-qa run sa
~~~

静的解析については、[011-static-analysis](./011-static-analysis.md) に詳細を記載する。

## 2.自動テストが成功すること
以下のコマンドにより、リポジトリにコミットされるソースコードに対するテストを実行し、失敗（F）またはエラー（E）が存在しないことを確認しなければならない。

~~~ shell
vendor/bin/phpunit 
~~~

テストが失敗する、またはエラーが発生する場合、テストが成功する状態となるようソースコードを修正すること。

自動テストについては、[040-testing](./040-testing.md) に詳細を記載する。

## 3.マイグレーションが変更されていないこと
変更差分にマイグレーションファイルに対する修正が含まれている場合、コミットしてはならない。
- マイグレーションファイルは新規追加のみ許可。
- 既にコミットされているマイグレーションの変更は原則として禁止である。
  - ただし、変更対象のマイグレーションファイルが過去に一度もリモートリポジトリにpushされていないことを保証できる場合は、例外的にコミットを許可する。
- この基準3は、静的解析による自動検出が実装されていないため注意すること。
